<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="account">
	<!-- 계정 생성 -->
	<insert id="insertAccount">
		insert into account(id, pass, email, name) values(#{id }, #{pass }, #{email }, #{name })
	</insert>
	
	<!-- 검색 -->
	<select id="selectOneAccount" resultType="mvc.model.AccountDTO">
		select * from account where id = #{id } and pass = #{pass }
	</select>
	<select id="selectOneAccountre" resultType="mvc.model.AccountDTO">
		select * from account where id = #{id }
	</select>
	
	<select id="selectAllAccountNotme" resultType="java.util.LinkedHashMap">
		select * from account where id != #{id}
		</select>
	<select id="selectAllAccount" resultType="mvc.model.AccountDTO">
		select * from account
	</select>

<!-- 	<resultMap type="FollowDTO" id="followDTO">
		<result column="no" property="no" />
		<result column="me" property="me" />
		<result column="target" property="target" />
		<result column="scope" property="scope" />
	</resultMap>

	<resultMap type="AccountDTO" id="accountDTO">
		<result column="id" property="id" />
		<result column="pass" property="pass" />
		<result column="email" property="email" />
		<result column="name" property="name" />
		<result column="phone" property="phone" />
		<result column="profile" property="profile" />
		<result column="nick" property="nick" />
		<result column="intro" property="intro" />
		<result column="scope" property="scope" />
		<collection property="FollowDTO" resultMap="FollowDTO" />
	</resultMap> -->
	
	<select id="selectAllAccountFollowing" resultType="java.util.LinkedHashMap">
		select * from account inner join follow on account.id = follow.me where account.id = #{id }
	</select>
	
	<select id="selectAllAccountFollower" resultType="java.util.LinkedHashMap">
		select * from account inner join follow on account.id = follow.target where follow.target = #{target }
	</select>
	
	
	<!-- 업데이트 -->
	<delete id="deleteAccount">
		delete * from account where id= #{id }
	</delete>
	
	<update id="updateAccont">
		update * set phone= #{phone }, profile= #{profile }, nick= #{nick }, gender= #{gender }, birth= #{birth }, intro= #{intro }, scope= #{scope } where id= #{id }
	</update>
</mapper>